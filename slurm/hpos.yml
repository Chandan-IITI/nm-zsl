deeper_model:
    grid:
        head|after_fuse_transform_layers: ["{512}", "{256-512}", "{512-512}", "{512-512-512}"]
        optim|kwargs|lr: [0.0001, 0.0005, 0.001, 0.0025, 0.005]
        optim|kwargs|momentum: [0.0, 0.5, 0.9]
        head|num_prototypes: [1]
    baselines: []

generative_training:
    grid:
        # Static
        generative_training|type: ["mmd"]
        generative_training|num_protos: [25]
        head|num_prototypes: [50]

        # HPO search
        optim|groups|head|lr: [0.001, 0.005]
        clip_grad|value: [1, 10]
        generative_training|loss_coef: [0.1, 1.0, 10.0]
        generative_training|cov_diff_coef: [0.0, 0.001, 0.01, 0.1, 1.0]
        # head|tanh_on_top: [True, False]
        reverse_clf|loss_coef: [0.0, 1.0]
        diagonal_cov_reg|loss_coef: [0.0, 1.0]

linear_generative_training:
    grid:
        # Static
        head|noise|transform_layers: ["100-100"]
        head|after_fuse_transform_layers: ["512-"]
        head|after_fuse_activation: ["none"]
        head|after_fuse_identity_init: [false]
        generative_training|type: ["mmd"]
        generative_training|num_protos: [25]

        # HPO search
        optim|groups|head|lr: [0.001, 0.003, 0.005]
        optim|groups|embedder|lr: [0.001, 0.003]
        clip_grad|value: [5, 10, 100]
        generative_training|loss_coef: [0.1, 1.0, 10.0]
        head|tanh_on_top: [True, False]
        fusing_type: ["concat", "full_mult_int"]

autoencoding_loss:
    grid:
        # Required changes
        head|num_prototypes: [50]
        head|noise|std: [1.0]
        head|dae|enabled: [true]

        # HPO search
        head|dae|loss_coef: [0.1, 1.0, 10.0]
        head|after_fuse_transform_layers: ["{512-512}"]

    baselines: [{head|after_fuse_transform_layers: "{512}"}]

classifier_loss:
    grid:
        # Required changes
        head|num_prototypes: [50]
        head|noise|std: [1.0]

        # HPO search
        protos_clf_loss_coef: [0.1, 1.0, 10.0]
        head|after_fuse_transform_layers: ["{512-512}"]

    baselines: [{head|after_fuse_transform_layers: "{512}"}]

dropout:
    grid:
        # Required changes
        head|dropout|enabled: [true]

        # HPO search
        head|attrs_transform_layers: ["{312-512}", "{312-1024-512}"]
        head|use_tanh_on_top: [true, false]
        head|dropout|std: [0.1, 0.5, 1.0]

    baselines: []


normalized_attrs:
    grid:
        normalized_attrs: [true, false]
        head|after_fuse_transform_layers: ["{512}", "{256-512}", "{512-512}", "{512-512-512}"]
        clip_grad|value: [10, 100, 1000, 1000000000]
    baselines: []


triplet_loss:
    grid:
        head|num_prototypes: [50]
        head|noise|std: [1.0]
        triplet_loss|enabled: [true]
        clip_grad|value: [10]
        normalized_attrs: [true]

        head|after_fuse_transform_layers: ["512-512", "512-512-512"]
        head|aggregation_type: ["average_prototypes", "mean_distance"]
        triplet_loss|coef: [0.0, 0.1, 1.0, 10.0]
        cls_loss|enabled: [true, false]

    baselines: [{head|after_fuse_transform_layers: "{512}"}]

different_optims:
    grid:
        #head|after_fuse_transform_layers: ["512-512", "512-512-512"]
        head|after_fuse_transform_layers: ["512-"]
        normalized_attrs: [true, false]
        clip_grad|value: [10, 25, 50, 1000]
        optim|groups|head|lr: [0.0001, 0.0005, 0.001, 0.005]
        optim|groups|head|momentum: [0.0, 0.9]
        #optim|groups|embedder|lr: [0.0001, 0.0005, 0.001, 0.005]
        #optim|groups|embedder|momentum: [0.5, 0.75, 0.9, 0.95]

    baselines: []

golden_proto_linear:
    grid:
        head|after_fuse_transform_layers: ["512-"]
        head|noise|std: [1.0]
        head|golden_proto|enabled: [true]
        head|num_prototypes: [50]
        generative_training|type: ["gdpp"]

        normalized_attrs: [true, false]
        clip_grad|value: [10, 100]
        optim|groups|embedder|lr: [0.0005, 0.005]
        head|golden_proto|weight: [0.9, 0.75, 0.5, 0.25, 0.1, 0.0]
        generative_training|loss_coef: [0.0, 0.1, 1.0]

diagonal_cov_reg:
    grid:
        diagonal_cov_reg|loss_coef: [1.0, 0.1, 0.01, 0.005, 0.001]
        diagonal_cov_reg|batch_size: [100, 250]

pull_golden_protos:
    grid:
        head|common|pull_golden_protos|loss_coef: [0.0, 0.1, 1.0]

pull_golden_protos:
    grid:
        head|common|pull_golden_protos|loss_coef: [0.0, 0.1, 1.0]
